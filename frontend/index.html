<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Option Pricer</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
  background: #f5f7fa;
  margin: 0;
  padding: 2rem;
  color: #222;
}

h1 {
  margin-bottom: 1rem;
  text-align: center;
}

.container {
  background: white;
  padding: 2rem 2.5rem;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  max-width: 900px;
  margin: auto;
}

.row {
  display: flex;
  gap: 1rem;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
}

label {
  width: 160px;
  font-weight: 600;
}

input, select {
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  width: 140px;
}

input:focus, select:focus {
  outline: none;
  border-color: #4f46e5;
}

button {
  margin-top: 1rem;
  padding: 10px 20px;
  background: #4f46e5;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

button:hover {
  background: #4338ca;
}

.output {
  margin-top: 2rem;
  background: #f9fafb;
  padding: 1.5rem;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.metric {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.4rem;
  font-size: 15px;
}

.metric strong {
  color: #333;
}
</style>
</head>

<body>

<div class="container">

<h1>Option Pricer</h1>

<form id="optionForm">

<div class="row">
<label>Spot (S)</label><input type="number" step="0.01" name="S" value="100" required>
<label>Strike (K)</label><input type="number" step="0.01" name="K" value="100" required>
</div>

<div class="row">
<label>Maturity (T)</label><input type="number" step="0.01" name="T" value="1" required>
<label>Rate (r)</label><input type="number" step="0.0001" name="r" value="0.05" required>
</div>

<div class="row">
<label>Volatility σ</label><input type="number" step="0.01" name="sigma">
<label>Market Price</label><input type="number" step="0.01" name="market_price">
</div>

<div class="row">
<label>Call / Put</label>
<select name="is_call">
<option value="true">Call</option>
<option value="false">Put</option>
</select>

<label>American</label>
<select name="is_american">
<option value="false">No</option>
<option value="true">Yes</option>
</select>
</div>

<button type="submit">Calculate</button>

</form>

<div class="output" id="output"></div>

</div>

<script>
const form = document.getElementById('optionForm');
const output = document.getElementById('output');

form.addEventListener('submit', async (e) => {
  e.preventDefault();

  const formData = new FormData(form);
  const data = {};

  formData.forEach((value, key) => {
    if (key === 'is_call' || key === 'is_american') {
      data[key] = value === 'true';
    } else if (value !== '') {
      data[key] = parseFloat(value);
    }
  });

  output.innerHTML = "<p>Calculating...</p>";

  try {
    const response = await fetch('https://option-pricer-kjbi.onrender.com/price', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(data)
    });

    const result = await response.json();

    output.innerHTML = `
<h2>Results</h2>

<div class="metric"><strong>Black–Scholes</strong><span>${result.bs_price.toFixed(4)}</span></div>
<div class="metric"><strong>Monte Carlo</strong><span>${result.mc_price.toFixed(4)}</span></div>
<div class="metric"><strong>Binomial Tree</strong><span>${result.binomial_price.toFixed(4)}</span></div>

<hr>

<div class="metric"><strong>Delta</strong><span>${result.delta.toFixed(4)}</span></div>
<div class="metric"><strong>Gamma</strong><span>${result.gamma.toFixed(4)}</span></div>
<div class="metric"><strong>Vega</strong><span>${result.vega.toFixed(4)}</span></div>
<div class="metric"><strong>Theta</strong><span>${result.theta.toFixed(4)}</span></div>
<div class="metric"><strong>Rho</strong><span>${result.rho.toFixed(4)}</span></div>

${result.implied_vol !== null ? `<hr><div class="metric"><strong>Implied Vol</strong><span>${result.implied_vol.toFixed(4)}</span></div>` : ''}
`;

  } catch (err) {
    output.innerHTML = `<p style="color:red">${err}</p>`;
  }
});
</script>

</body>
</html>